<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>One week of carsharing in Milan</title>
    <meta name="generator" content="Bootply" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  		<!--[if lt IE 9]>
  		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
  		<![endif]-->
  	<link href="css/styles.css" rel="stylesheet">
  	<link href='http://fonts.googleapis.com/css?family=Cardo:400,400italic,700' rel='stylesheet' type='text/css'>
  	<link href='http://fonts.googleapis.com/css?family=Raleway:400,300,500,600,700,800,900' rel='stylesheet' type='text/css'> 
  		
  		<!--Mapbox-->
    <script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.css' rel='stylesheet' />

    <script src='bower_components/vimeo-api/index.js'></script>
  </head>
  <body>
    <!-- Wrap all page content here -->
    <div id="wrap">

     <header class="masthead">
      <div class="container">
       <div class="intro">
        <h1>Seven Days <br>of car sharing<br>in Milan</h1>
        <hr>
        <h2>Lorem ipsum dolor sit amet, consectetur adipisicing elit, <br>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</h2>
      </div>
    </div><!-- /.container -->
  </header>

  <!-- Fixed navbar -->
  <div class="navbar navbar-custom navbar-inverse navbar-static-top" id="nav">
    <div class="container">
     <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
     </button>
   </div>
   <div class="collapse navbar-collapse">
    <ul class="nav navbar-nav nav-justified">
     <li><a href="#section1">1.About the Project</a></li>
     <li><a href="#section2">2.Overview</a></li>
     <li><a href="#section3">3.Viz 2</a></li>
     <li><a href="#section4">4.Viz 3</a></li>
   </ul>
 </div><!--/.nav-collapse -->
</div><!--/.container -->
</div><!--/.navbar -->

<div class="container" id="section1"><!--/section1-->
  <div class="row explanation">
   <div class="col-xs-12 col-sm-12 col-md-4">
    <h1>About the project<h1>
      <hr>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-8">
      <p><b>Lorem ipsum dolor sit amet</b>, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </div>
</div><!--/section1-->

<div class="container-fluid" id="section2">

  <div class="container" >
   <div class="row explanation-viz" >
    <div class="col-xs-12 col-sm-12 col-md-4">
     <h1>Overview<h1>
       <hr>
     </div>
     <div class="col-xs-12 col-sm-12 col-md-8">
       <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
     </div>
   </div>
 </div>

</div>

<div class="container-fluid" id="section3">
  <div class="video-responsive">
      <iframe id="playerVimeo" src="//player.vimeo.com/video/98626446?title=0&amp;byline=0&amp;portrait=0&amp;color=E8C102&amp;loop=1" width="954" height="537" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
 </div>
 <div class="container" >
   <div class="row explanation-viz" >
    <div class="col-xs-12 col-sm-12 col-md-4">
     <h1>About this map<h1>
       <hr>
     </div>
     <div class="col-xs-12 col-sm-12 col-md-8">
       <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
     </div>
   </div>
 </div>
</div>

<div class="container-fluid" id="section4">
  <div id='map'><nav id='menu-ui' class='menu-ui'></nav></div>
</div>

<div class="container-fluid">

  <div class="container" >
   <div class="row explanation" >
    <div class="col-xs-12 col-sm-12 col-md-4">
     <h1>Overview<h1>
       <hr>
     </div>
     <div class="col-xs-12 col-sm-12 col-md-8">
       <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
     </div>
   </div>
 </div>

</div>


</div><!--/wrap-->

<!-- script references -->
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/jquery-waypoints/waypoints.min.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="bower_components/d3/d3.min.js"></script>
<script src="js/scripts.js"></script>

<!--Mapbox-->
<script>
var southWest = L.latLng(45.3705,9.0404),
northEast = L.latLng(45.5554,9.3288),
bounds = L.latLngBounds(southWest, northEast);

var map = L.mapbox.map('map', 'giorgiouboldi.ifkdj2f1', {minZoom:12,maxZoom:15,maxBounds: bounds} )
var layers = document.getElementById('menu-ui');

// Disable drag and zoom handlers.
map.touchZoom.disable();
map.scrollWheelZoom.disable();

addLayer(L.mapbox.tileLayer('giorgiouboldi.cwxt7qfr'), 'Morning', 2);
addLayer(L.mapbox.tileLayer('giorgiouboldi.2z55ewmi'), 'Afternoon', 3);
addLayer(L.mapbox.tileLayer('giorgiouboldi.xoagu8fr'), 'Evening', 4);
addLayer(L.mapbox.tileLayer('giorgiouboldi.vvwh4cxr'), 'Night', 5);



function addLayer(layer, name, zIndex) {
  layer
  .setZIndex(zIndex)
  .setOpacity(0.4)
  .addTo(map);

    // Create a simple layer switcher that
    // toggles layers on and off.
    var link = document.createElement('a');
    link.href = '#';
    link.className = 'active';
    link.innerHTML = name;

    link.onclick = function(e) {
      e.preventDefault();
      e.stopPropagation();

      if (map.hasLayer(layer)) {
        map.removeLayer(layer);
        this.className = '';
      } else {
        map.addLayer(layer);
        this.className = 'active';
      }
    };

    layers.appendChild(link);
  }


  var froogaloop = $f(playerVimeo)


function elementInViewport(el) {
  
  var el = el[0]

  var top = el.offsetTop;
  var left = el.offsetLeft;
  var width = el.offsetWidth;
  var height = el.offsetHeight;

  while(el.offsetParent) {
    el = el.offsetParent;
    top += el.offsetTop;
    left += el.offsetLeft;
  }

  return (
    top < (window.pageYOffset + window.innerHeight) &&
    left < (window.pageXOffset + window.innerWidth) &&
    (top + height) > window.pageYOffset &&
    (left + width) > window.pageXOffset
  );
}

function callbackIn () {
    setTimeout(
      function(){
      froogaloop.api('play')
      }, 500)
} 

function callbackOut () {
    froogaloop.api('pause');
} 

function fireIfElementVisible (el, callbackIn, callbackOut) {
    return function () {
        if ( elementInViewport(el) ) {
            callbackIn();
        }else{
            callbackOut()
        }
    }
}

var videoHandler = fireIfElementVisible($(".video-responsive"), callbackIn, callbackOut);

$(window).on('resize scroll', videoHandler); 


  </script>
</body>
</html>